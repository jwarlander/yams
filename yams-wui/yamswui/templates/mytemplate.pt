<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Yet Another Monitoring System</title>
    <script src="/static/jquery-2.0.0.min.js"></script>
    <script src="/static/flotr2.min.js"></script>
    <link rel="stylesheet" href="static/yams.css" type="text/css" />
  </head>
  <body>
    <div id="plugins" style="float: left; height: 100%; width: 200px;">...</div>
    <script type="text/javascript">
      $( document ).ready( function() {
        $.get( "plugins", function( plugins ) {
          $( '#plugins' ).html( plugins );
        } );
      } );
    </script>

    <form id="timeform" action="">
      Plotting the past
      <input id="value" type="text" name="value" value="${time_range}" size="4">
      hour(s) <input type="submit" class="time_button" value="Update">
    </form>
    <script>
      $( function() {
        $( ".time_button" ).click( function() {
          var value = $( "input#value" ).val();
          $.get( "toggle_time_range/" + value, function() {
            $.get( "session", function( session ) {
              $( '#session' ).html( session );
            } );
            $.get( "chart", function( chart ) {
              $( '#container' ).html( chart );
            } );
          } );
          return false;
        } );
      } );
    </script>

    <div id="container"></div>
    <script type="text/javascript">
      $( document ).ready( function() {
        $.get( "chart", function( chart ) {
          $( '#container' ).html( chart );
        } );
      } );
    </script>

    <div id="session"></div>
    <script type="text/javascript">
      $( document ).ready( function() {
        $.get( "session", function( session ) {
          $( '#session' ).html( session );
        } );
      } );
    </script>
  </body>
</html>
